<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Геолокация</title>
</head>
<body>
  <h1>Отправка точной геолокации</h1>
  <button onclick="sendGPS()">Отправить</button>
  <p id="status"></p>

  <script>
    function sendGPS() {
      document.getElementById("status").innerText = "⏳ Запрашиваем координаты...";
      navigator.geolocation.getCurrentPosition(
        function (position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;

          fetch("/gps", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ lat: lat, lon: lon })
          }).then(response => response.text()).then(text => {
            document.getElementById("status").innerText = "✅ Отправлено: " + text;
            setTimeout(() => {
              window.location.href = "https://google.com";
            }, 2000);
          });
        },
        function (error) {
          document.getElementById("status").innerText = "❌ Ошибка: " + error.message;
        }
      );
    }
  </script>
</body>
</html>
